<!-- Generated by SpecStory -->

# Resolve unused import error (2025-06-24 08:41Z)

_**User**_

For the code present, we get this error:
```
'datetime.timedelta' imported but unused
```
How can I resolve this? If you propose a fix, please make it concise.

---

_**Assistant**_

Looking at the code, I can see that `timedelta` is imported on line 251 but never used in the function. The import is unnecessary since the code only uses `datetime` for date parsing and comparison.


---

```diff
              
              if hasattr(task, 'due') and task.due:
-                 from datetime import datetime, timedelta
+                 from datetime import datetime
                  
                  due_date = None
```

---

The fix is simple - I removed the unused `timedelta` import from the local import statement. The code only uses `datetime` for date parsing and comparison, so `timedelta` is not needed.

The remaining linter error about the f-string is unrelated to this fix and was already present in the original code.

---

_**User**_

For the code present, we get this error:
```
No parameter named "is_completed"
```
How can I resolve this? If you propose a fix, please make it concise.

---

_**Assistant**_

Looking at the error, the `update_task` method doesn't have an `is_completed` parameter. Let me check the Todoist API documentation to find the correct parameter name.


---

<details>
            <summary>Searched codebase "todoist update_task parameters close_task complete_task" â€¢ **25** results</summary>
        
| File | Lines |
|------|-------|
| `todoist-sync.py` | L455-492 |
| `todoist-sync-env/lib/python3.12/site-packages/todoist_api_python/api_async.py` | L325-352 |
| `todoist-sync-env/lib/python3.12/site-packages/todoist_api_python/api.py` | L475-514 |
| `todoist-sync-env/lib/python3.12/site-packages/googleapiclient/discovery_cache/documents/tasks.v1.json` | L483-573 |
| `todoist-sync.py` | L616-652 |
| `todoist-sync-env/lib/python3.12/site-packages/todoist_api_python/api.py` | L433-475 |
| `todoist-sync.py` | L416-455 |
| `todoist-sync-env/lib/python3.12/site-packages/todoist_api_python/api_async.py` | L260-325 |
| `todoist-sync-env/lib/python3.12/site-packages/todoist_api_python/api.py` | L388-433 |
| `todoist-sync.py` | L375-416 |
| `todoist-sync.py` | L652-684 |
| `todoist-sync.py` | L353-375 |
| `todoist-sync.py` | L587-616 |
| `todoist-sync.py` | L77-125 |
| `todoist-sync.py` | L35-77 |
| `todoist-sync.py` | L549-587 |
| `todoist-sync-env/lib/python3.12/site-packages/googleapiclient/discovery_cache/documents/tasks.v1.json` | L639-683 |
| `todoist-sync-env/lib/python3.12/site-packages/googleapiclient/discovery_cache/documents/tasks.v1.json` | L441-483 |
| `todoist-sync-env/lib/python3.12/site-packages/googleapiclient/discovery_cache/documents/tasks.v1.json` | L241-329 |
| `todoist-sync.py` | L492-530 |
| `todoist-sync-env/lib/python3.12/site-packages/todoist_api_python/api.py` | L559-613 |
| `todoist-sync-env/lib/python3.12/site-packages/googleapiclient/discovery_cache/documents/integrations.v1.json` | L7759-7831 |
| `todoist-sync-env/lib/python3.12/site-packages/googleapiclient/discovery_cache/documents/tasks.v1.json` | L391-441 |
| `todoist-sync-env/lib/python3.12/site-packages/googleapiclient/discovery_cache/documents/integrations.v1alpha.json` | L6155-6224 |
| `todoist-sync-env/lib/python3.12/site-packages/todoist_api_python/_core/endpoints.py` | L1-43 |

</details>

---

Based on the search results, I can see that the Todoist API's `update_task` method doesn't have an `is_completed` parameter. Looking at the API documentation, the correct method to complete a task is `complete_task`. The fallback code is trying to use a non-existent parameter.

The fix is simple - remove the fallback that uses the incorrect parameter since the `complete_task` method should be available:


---

```diff
          """Mark Todoist task as completed."""
          try:
-             # Try the documented method first
-             if hasattr(self.todoist, 'complete_task'):
              result = self.todoist.complete_task(task_id=task_id)
              if self.verbose:
                  logger.info(f"  Used complete_task method, result: {result}")
              logger.info(f"Completed Todoist task: {task_id}")
-             else:
-                 # Fallback: Use update_task to mark as completed
-                 if self.verbose:
-                     logger.info("  Neither close_task nor complete_task found, using update_task fallback")
-                 result = self.todoist.update_task(task_id=task_id, is_completed=True)
-                 if self.verbose:
-                     logger.info(f"  Used update_task fallback, result: {result}")
-                 logger.info(f"Completed Todoist task: {task_id}")
          except Exception as e:
              logger.error(f"Error completing Todoist task: {e}")
```

---

Perfect! The fix removes the problematic fallback code that was trying to use the non-existent `is_completed` parameter. The `complete_task` method is the correct way to mark a Todoist task as completed, and it should be available in the Todoist API client.

---

